"use strict";var e=require("react"),o=require("@nivo/core"),t=require("@nivo/theming"),r=require("@nivo/tooltip"),i=require("react/jsx-runtime"),n=require("lodash/isFunction.js"),a=require("lodash/get.js"),l=require("d3-format"),u=require("d3-geo"),c=require("@nivo/colors"),d=require("@nivo/legends"),s=e.memo((function(e){var o=e.path,t=e.graticule,r=e.lineWidth,n=e.lineColor;return i.jsx("path",{fill:"none",strokeWidth:r,stroke:n,d:o(t())})})),h=e.memo((function(e){var o,t=e.feature,r=e.path,n=e.fillColor,a=e.borderWidth,l=e.borderColor,u=e.onClick,c=e.onMouseEnter,d=e.onMouseMove,s=e.onMouseLeave;return i.jsx("path",{fill:null!=(o=null==t?void 0:t.fill)?o:n,strokeWidth:a,stroke:l,strokeLinejoin:"bevel",d:r(t),onMouseEnter:function(e){return c(t,e)},onMouseMove:function(e){return d(t,e)},onMouseLeave:function(e){return s(t,e)},onClick:function(e){return u(t,e)}},t.id)}));function f(){return f=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var t=arguments[o];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},f.apply(null,arguments)}var v={azimuthalEqualArea:u.geoAzimuthalEqualArea,azimuthalEquidistant:u.geoAzimuthalEquidistant,gnomonic:u.geoGnomonic,orthographic:u.geoOrthographic,stereographic:u.geoStereographic,equalEarth:u.geoEqualEarth,equirectangular:u.geoEquirectangular,mercator:u.geoMercator,transverseMercator:u.geoTransverseMercator,naturalEarth1:u.geoNaturalEarth1},p=function(o){var r=o.width,i=o.height,n=o.projectionType,a=o.projectionScale,l=o.projectionTranslation,d=o.projectionRotation,s=o.fillColor,h=o.borderWidth,f=o.borderColor,p=l[0],g=l[1],m=d[0],C=d[1],j=d[2],b=e.useMemo((function(){return v[n]().scale(a).translate([r*p,i*g]).rotate([m,C,j])}),[r,i,n,a,p,g,m,C,j]),x=e.useMemo((function(){return u.geoPath(b)}),[b]),w=e.useMemo((function(){return u.geoGraticule()}),[]),M=t.useTheme(),k=e.useMemo((function(){return"function"==typeof h?h:function(){return h}}),[h]),W=c.useInheritedColor(f,M),T=e.useMemo((function(){return"function"==typeof s?s:function(){return s}}),[s]);return{projection:b,path:x,graticule:w,getBorderWidth:k,getBorderColor:W,getFillColor:T}},g=function(t){var r=t.features,i=t.data,u=t.match,c=t.label,s=t.value,h=t.valueFormat,v=t.colors,p=t.unknownColor,g=t.domain,m=e.useMemo((function(){return n(u)?u:function(e,o){var t=a(e,u),r=a(o,u);return t&&t===r}}),[u]),C=e.useMemo((function(){return n(c)?c:function(e){return a(e,c)}}),[c]),j=e.useMemo((function(){return n(s)?s:function(e){return a(e,s)}}),[s]),b=e.useMemo((function(){return void 0===h?function(e){return e}:n(h)?h:l.format(h)}),[h]),x=e.useMemo((function(){return o.guessQuantizeColorScale(v).domain(g)}),[v,g]),w=e.useMemo((function(){return function(e){return void 0===e.value?p:x(e.value)}}),[x,p]),M=e.useMemo((function(){return r.map((function(e){var o=i.find((function(o){return m(e,o)})),t=j(o);if(o){var r=f({},e,{data:o,value:t,formattedValue:b(t)});return r.color=w(r),r.label=C(r),r}return e}))}),[r,i,m,j,b,w,C]),k=d.useQuantizeColorScaleLegendData({scale:x,valueFormat:b});return{colorScale:x,getFillColor:w,boundFeatures:M,valueFormatter:b,legendData:k}},m=e.memo((function(n){var a=n.width,l=n.height,u=n.margin,c=n.features,d=n.layers,f=void 0===d?["graticule","features"]:d,v=n.projectionType,g=void 0===v?"mercator":v,m=n.projectionScale,C=void 0===m?100:m,j=n.projectionTranslation,b=void 0===j?[.5,.5]:j,x=n.projectionRotation,w=void 0===x?[0,0,0]:x,M=n.fillColor,k=void 0===M?"#dddddd":M,W=n.borderWidth,T=void 0===W?0:W,y=n.borderColor,R=void 0===y?"#000000":y,E=n.enableGraticule,F=void 0!==E&&E,S=n.graticuleLineWidth,L=void 0===S?.5:S,q=n.graticuleLineColor,G=void 0===q?"#999999":q,B=n.isInteractive,P=void 0===B||B,D=n.onClick,I=void 0===D?function(){}:D,z=n.tooltip,H=n.role,A=void 0===H?"img":H,O=o.useDimensions(a,l,u),K=O.margin,Q=O.outerWidth,V=O.outerHeight,N=p({width:a,height:l,projectionType:g,projectionScale:C,projectionTranslation:b,projectionRotation:w,fillColor:k,borderWidth:T,borderColor:R}),J=N.graticule,U=N.path,X=N.getFillColor,Y=N.getBorderWidth,Z=N.getBorderColor,$=t.useTheme(),_=r.useTooltip(),ee=_.showTooltipFromEvent,oe=_.hideTooltip,te=e.useCallback((function(e,o){return P&&I&&I(e,o)}),[P,I]),re=e.useCallback((function(e,o){return P&&z&&ee(i.jsx(z,{feature:e}),o)}),[P,ee,z]),ie=e.useCallback((function(e,o){return P&&z&&ee(i.jsx(z,{feature:e}),o)}),[P,ee,z]),ne=e.useCallback((function(){return P&&oe()}),[P,oe]);return i.jsx(o.SvgWrapper,{width:Q,height:V,margin:K,theme:$,role:A,children:f.map((function(o,t){return"graticule"===o?!0!==F?null:i.jsx(s,{path:U,graticule:J,lineWidth:L,lineColor:G},"graticule"):"features"===o?i.jsx(e.Fragment,{children:c.map((function(e){return i.jsx(h,{feature:e,path:U,fillColor:X(e),borderWidth:Y(e),borderColor:Z(e),onMouseEnter:re,onMouseMove:ie,onMouseLeave:ne,onClick:te},e.id)}))},"features"):i.jsx(e.Fragment,{children:o(n)},t)}))})})),C=o.withContainer(m),j=function(e,t,r,i){var n=o.getRelativeCursor(t,e),a=n[0],l=n[1];return r.find((function(e){return u.geoContains(e,i.invert([a,l]))}))},b=e.memo((function(n){var a=n.width,l=n.height,u=n.margin,c=n.pixelRatio,d=void 0===c?"undefined"!=typeof window&&window.devicePixelRatio||1:c,s=n.features,h=n.layers,f=n.projectionType,v=void 0===f?"mercator":f,g=n.projectionScale,m=void 0===g?100:g,C=n.projectionTranslation,b=void 0===C?[.5,.5]:C,x=n.projectionRotation,w=void 0===x?[0,0,0]:x,M=n.fillColor,k=void 0===M?"#dddddd":M,W=n.borderWidth,T=void 0===W?0:W,y=n.borderColor,R=void 0===y?"#000000":y,E=n.enableGraticule,F=void 0!==E&&E,S=n.graticuleLineWidth,L=void 0===S?.5:S,q=n.graticuleLineColor,G=void 0===q?"#999999":q,B=n.isInteractive,P=void 0===B||B,D=n.onClick,I=void 0===D?function(){}:D,z=n.onMouseMove,H=void 0===z?function(){}:z,A=n.tooltip,O=e.useRef(null),K=t.useTheme(),Q=o.useDimensions(a,l,u),V=Q.margin,N=Q.outerWidth,J=Q.outerHeight,U=p({width:a,height:l,projectionType:v,projectionScale:m,projectionTranslation:b,projectionRotation:w,fillColor:k,borderWidth:T,borderColor:R}),X=U.projection,Y=U.graticule,Z=U.path,$=U.getFillColor,_=U.getBorderWidth,ee=U.getBorderColor;e.useEffect((function(){if(O){O.current.width=N*d,O.current.height=J*d;var e=O.current.getContext("2d");e.scale(d,d),e.fillStyle=K.background,e.fillRect(0,0,N,J),e.translate(V.left,V.top),Z.context(e),h.forEach((function(o){"graticule"===o?!0===F&&(e.lineWidth=L,e.strokeStyle=G,e.beginPath(),Z(Y()),e.stroke()):"features"===o?s.forEach((function(o){e.beginPath(),Z(o),e.fillStyle=$(o),e.fill();var t=_(o);t>0&&(e.strokeStyle=ee(o),e.lineWidth=t,e.stroke())})):o(e,n)}))}}),[O,N,J,V,d,K,Z,Y,$,_,ee,s,h,F,G,L,n]);var oe=r.useTooltip(),te=oe.showTooltipFromEvent,re=oe.hideTooltip,ie=e.useCallback((function(e){if(P&&A){var o=j(e,O.current,s,X);o?te(i.jsx(A,{feature:o}),e):re(),null==H||H(o||null,e)}}),[te,re,P,A,O,s,X,H]),ne=e.useCallback((function(){return P&&re()}),[P,re]),ae=e.useCallback((function(e){if(P&&I){var o=j(e,O.current,s,X);o&&I(o,e)}}),[P,O,s,X,I]);return i.jsx("canvas",{ref:O,width:N*d,height:J*d,style:{width:N,height:J,cursor:P?"auto":"normal"},onMouseMove:ie,onMouseLeave:ne,onClick:ae})})),x=o.withContainer(b),w=e.memo((function(e){var o=e.feature;return void 0===o.data?null:i.jsx(r.BasicTooltip,{id:o.label,color:o.color,enableChip:!0,value:o.formattedValue})})),M=e.memo((function(n){var a=n.width,l=n.height,u=n.margin,c=n.features,v=n.data,m=n.match,C=void 0===m?"id":m,j=n.label,b=void 0===j?"id":j,x=n.value,M=void 0===x?"value":x,k=n.valueFormat,W=n.projectionType,T=void 0===W?"mercator":W,y=n.projectionScale,R=void 0===y?100:y,E=n.projectionTranslation,F=void 0===E?[.5,.5]:E,S=n.projectionRotation,L=void 0===S?[0,0,0]:S,q=n.colors,G=void 0===q?"PuBuGn":q,B=n.domain,P=n.unknownColor,D=void 0===P?"#999":P,I=n.borderWidth,z=void 0===I?0:I,H=n.borderColor,A=void 0===H?"#000000":H,O=n.enableGraticule,K=void 0!==O&&O,Q=n.graticuleLineWidth,V=void 0===Q?.5:Q,N=n.graticuleLineColor,J=void 0===N?"#999999":N,U=n.layers,X=void 0===U?["graticule","features","legends"]:U,Y=n.legends,Z=void 0===Y?[]:Y,$=n.isInteractive,_=void 0===$||$,ee=n.onClick,oe=void 0===ee?function(){}:ee,te=n.tooltip,re=void 0===te?w:te,ie=n.role,ne=void 0===ie?"img":ie,ae=n.defs,le=void 0===ae?[]:ae,ue=n.fill,ce=void 0===ue?[]:ue,de=o.useDimensions(a,l,u),se=de.margin,he=de.outerWidth,fe=de.outerHeight,ve=p({width:a,height:l,projectionType:T,projectionScale:R,projectionTranslation:F,projectionRotation:L,fillColor:function(){},borderWidth:z,borderColor:A}),pe=ve.graticule,ge=ve.path,me=ve.getBorderWidth,Ce=ve.getBorderColor,je=g({features:c,data:v,match:C,label:b,value:M,valueFormat:k,colors:G,unknownColor:D,domain:B}),be=je.getFillColor,xe=je.boundFeatures,we=je.legendData,Me=t.useTheme(),ke=o.bindDefs(le,xe,ce,{dataKey:"data",targetKey:"fill"}),We=r.useTooltip(),Te=We.showTooltipFromEvent,ye=We.hideTooltip,Re=e.useCallback((function(e,o){return _&&oe&&oe(e,o)}),[_,oe]),Ee=e.useCallback((function(e,o){return _&&re&&Te(i.jsx(re,{feature:e}),o)}),[_,Te,re]),Fe=e.useCallback((function(e,o){return _&&re&&Te(i.jsx(re,{feature:e}),o)}),[_,Te,re]),Se=e.useCallback((function(){return _&&ye()}),[_,ye]);return i.jsx(o.SvgWrapper,{width:he,height:fe,margin:se,theme:Me,defs:ke,role:ne,children:X.map((function(o,t){return"graticule"===o?!0!==K?null:i.jsx(s,{path:ge,graticule:pe,lineWidth:V,lineColor:J},"graticule"):"features"===o?i.jsx(e.Fragment,{children:xe.map((function(e){return i.jsx(h,{feature:e,path:ge,fillColor:be(e),borderWidth:me(e),borderColor:Ce(e),onMouseEnter:Ee,onMouseMove:Fe,onMouseLeave:Se,onClick:Re},e.id)}))},"features"):"legends"===o?Z.map((function(e,o){return i.jsx(d.BoxLegendSvg,f({containerWidth:a,containerHeight:l,data:we},e),o)})):i.jsx(e.Fragment,{children:o({})},t)}))})})),k=o.withContainer(M),W=function(e,t,r,i){var n=o.getRelativeCursor(t,e),a=n[0],l=n[1];return r.find((function(e){return u.geoContains(e,i.invert([a,l]))}))},T=e.memo((function(n){var a=n.width,l=n.height,u=n.margin,c=n.pixelRatio,s=void 0===c?"undefined"!=typeof window&&window.devicePixelRatio||1:c,h=n.features,v=n.data,m=n.match,C=void 0===m?"id":m,j=n.label,b=void 0===j?"id":j,x=n.value,M=void 0===x?"value":x,k=n.valueFormat,T=n.projectionType,y=void 0===T?"mercator":T,R=n.projectionScale,E=void 0===R?100:R,F=n.projectionTranslation,S=void 0===F?[.5,.5]:F,L=n.projectionRotation,q=void 0===L?[0,0,0]:L,G=n.colors,B=void 0===G?"PuBuGn":G,P=n.domain,D=n.unknownColor,I=void 0===D?"#999":D,z=n.borderWidth,H=void 0===z?0:z,A=n.borderColor,O=void 0===A?"#000000":A,K=n.enableGraticule,Q=void 0!==K&&K,V=n.graticuleLineWidth,N=void 0===V?.5:V,J=n.graticuleLineColor,U=void 0===J?"#999999":J,X=n.layers,Y=void 0===X?["graticule","features","legends"]:X,Z=n.legends,$=void 0===Z?[]:Z,_=n.isInteractive,ee=void 0===_||_,oe=n.onClick,te=void 0===oe?function(){}:oe,re=n.onMouseMove,ie=void 0===re?function(){}:re,ne=n.tooltip,ae=void 0===ne?w:ne,le=e.useRef(null),ue=t.useTheme(),ce=o.useDimensions(a,l,u),de=ce.margin,se=ce.outerWidth,he=ce.outerHeight,fe=p({width:a,height:l,projectionType:y,projectionScale:E,projectionTranslation:S,projectionRotation:q,fillColor:function(){},borderWidth:H,borderColor:O}),ve=fe.projection,pe=fe.graticule,ge=fe.path,me=fe.getBorderWidth,Ce=fe.getBorderColor,je=g({features:h,data:v,match:C,label:b,value:M,valueFormat:k,colors:B,unknownColor:I,domain:P}),be=je.getFillColor,xe=je.boundFeatures,we=je.legendData;e.useEffect((function(){if(le){le.current.width=se*s,le.current.height=he*s;var e=le.current.getContext("2d");e.scale(s,s),e.fillStyle=ue.background,e.fillRect(0,0,se,he),e.translate(de.left,de.top),ge.context(e),Y.forEach((function(o){"graticule"===o?!0===Q&&(e.lineWidth=N,e.strokeStyle=U,e.beginPath(),ge(pe()),e.stroke()):"features"===o?xe.forEach((function(o){e.beginPath(),ge(o),e.fillStyle=be(o),e.fill();var t=me(o);t>0&&(e.strokeStyle=Ce(o),e.lineWidth=t,e.stroke())})):"legends"===o&&$.forEach((function(o){d.renderLegendToCanvas(e,f({},o,{data:we,containerWidth:a,containerHeight:l,theme:ue}))}))}))}}),[le,a,se,l,he,de,s,ue,ge,pe,be,me,Ce,xe,$,we,Y,Q,U,N]);var Me=r.useTooltip(),ke=Me.showTooltipFromEvent,We=Me.hideTooltip,Te=e.useCallback((function(e){if(ee&&ae){var o=W(e,le.current,xe,ve);o?ke(i.jsx(ae,{feature:o}),e):We(),null==ie||ie(o||null,e)}}),[ke,We,ee,ae,le,xe,ve,ie]),ye=e.useCallback((function(){return ee&&We()}),[ee,We]),Re=e.useCallback((function(e){if(ee&&te){var o=W(e,le.current,xe,ve);o&&te(o,e)}}),[ee,le,xe,ve,te]);return i.jsx("canvas",{ref:le,width:se*s,height:he*s,style:{width:se,height:he,cursor:ee?"auto":"normal"},onMouseMove:Te,onMouseLeave:ye,onClick:Re})})),y=o.withContainer(T),R={projectionType:"mercator",projectionScale:100,projectionTranslation:[.5,.5],projectionRotation:[0,0,0],enableGraticule:!1,graticuleLineWidth:.5,graticuleLineColor:"#999999",fillColor:"#dddddd",borderWidth:0,borderColor:"#000000",isInteractive:!0,onMouseEnter:function(){},onMouseLeave:function(){},onMouseMove:function(){},onClick:function(){},layers:["graticule","features"],legends:[],fill:[],defs:[]},E=f({},R,{role:"img"}),F=f({},R,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),S={match:"id",label:"id",value:"value",colors:"PuBuGn",unknownColor:"#999",tooltip:w,layers:["graticule","features","legends"]},L=f({},E,S,{role:"img"}),q=f({},F,S);exports.Choropleth=k,exports.ChoroplethCanvas=y,exports.ChoroplethCanvasDefaultProps=q,exports.ChoroplethDefaultProps=L,exports.GeoMap=C,exports.GeoMapCanvas=x,exports.GeoMapCanvasDefaultProps=F,exports.GeoMapDefaultProps=E,exports.ResponsiveChoropleth=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(k,f({width:t,height:r},e))}})},exports.ResponsiveChoroplethCanvas=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(y,f({width:t,height:r},e))}})},exports.ResponsiveGeoMap=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(C,f({width:t,height:r},e))}})},exports.ResponsiveGeoMapCanvas=function(e){return i.jsx(o.ResponsiveWrapper,{children:function(o){var t=o.width,r=o.height;return i.jsx(x,f({width:t,height:r},e))}})},exports.projectionById=v,exports.useChoropleth=g,exports.useGeoMap=p;
//# sourceMappingURL=nivo-geo.cjs.js.map
