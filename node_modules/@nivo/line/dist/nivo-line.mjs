import{memo as e,useMemo as o,useState as i,useCallback as n,createElement as t,forwardRef as r,Fragment as a,useRef as l,useEffect as s}from"react";import{curveFromProp as u,useValueFormatter as d,useMotionConfig as c,useAnimatedPath as h,getLabelGenerator as f,DotsItem as p,Container as v,useDimensions as b,CartesianMarkers as g,bindDefs as m,SvgWrapper as y,ResponsiveWrapper as x,getRelativeCursor as M,isCursorInRect as C,mergeRefs as S}from"@nivo/core";import{defaultAxisProps as B,Grid as w,Axes as T,renderGridLinesToCanvas as k,renderAxesToCanvas as W}from"@nivo/axes";import{BoxLegendSvg as L,renderLegendToCanvas as D}from"@nivo/legends";import{BasicTooltip as I,TableTooltip as F,Chip as E,useTooltip as G,Crosshair as H}from"@nivo/tooltip";import{line as P,area as R}from"d3-shape";import O from"lodash/uniqueId.js";import{useTheme as z}from"@nivo/theming";import{useOrdinalColorScale as A,useInheritedColor as V}from"@nivo/colors";import{computeXYScalesForSeries as Y}from"@nivo/scales";import{jsx as U,jsxs as X,Fragment as j}from"react/jsx-runtime";import{useSpring as q,animated as J}from"@react-spring/web";import{Mesh as K,useVoronoiMesh as N,renderVoronoiToCanvas as Q,renderVoronoiCellToCanvas as Z}from"@nivo/voronoi";function $(){return $=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},$.apply(null,arguments)}function _(e,o){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==o.indexOf(n))continue;i[n]=e[n]}return i}var ee,oe={xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},curve:"linear",colors:{scheme:"nivo"},lineWidth:2,layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],enablePoints:!0,pointSize:6,pointColor:{from:"series.color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,enableGridX:!0,enableGridY:!0,legends:[],isInteractive:!0,tooltip:e((function(e){var o=e.point;return U(I,{id:X("span",{children:["x: ",U("strong",{children:o.data.xFormatted}),", y:"," ",U("strong",{children:o.data.yFormatted})]}),enableChip:!0,color:o.seriesColor})})),sliceTooltip:e((function(e){var o=e.slice,i=e.axis,n=z(),t="x"===i?"y":"x";return U(F,{rows:o.points.map((function(e){return[U(E,{color:e.seriesColor,style:n.tooltip.chip},"chip"),e.seriesId,U("span",{style:n.tooltip.tableCellValue,children:e.data[t+"Formatted"]},"value")]}))})})),debugMesh:!1,renderWrapper:!0},ie=$({},oe,{defs:[],fill:[],enablePointLabel:!1,pointLabel:"data.yFormatted",areaBlendMode:"normal",axisTop:null,axisRight:null,axisBottom:B,axisLeft:B,useMesh:!1,enableSlices:!1,debugSlices:!1,enableCrosshair:!0,crosshairType:"bottom-left",enableTouchCrosshair:!1,initialHiddenIds:[],animate:!0,motionConfig:"gentle",role:"img",isFocusable:!1}),ne=$({},oe,{pixelRatio:"undefined"!=typeof window&&null!=(ee=window.devicePixelRatio)?ee:1,axisTop:null,axisRight:null,axisBottom:B,axisLeft:B});function te(e){return o((function(){return P().defined((function(e){return null!==e.x&&null!==e.y})).x((function(e){return e.x})).y((function(e){return e.y})).curve(u(e))}),[e])}function re(e){var i=e.curve,n=e.yScale,t=e.areaBaselineValue;return o((function(){return R().defined((function(e){return null!==e.x&&null!==e.y})).x((function(e){return e.x})).y1((function(e){return e.y})).curve(u(i)).y0(n(t))}),[i,n,t])}var ae=function(e){var i=e.componentId,n=e.enableSlices,t=e.points,r=e.width,a=e.height;return o((function(){if("x"===n){var e=new Map;return t.forEach((function(o){null!==o.data.x&&null!==o.data.y&&(e.has(o.x)?e.get(o.x).push(o):e.set(o.x,[o]))})),Array.from(e.entries()).sort((function(e,o){return e[0]-o[0]})).map((function(e,o,n){var t,l,s=e[0],u=e[1],d=n[o-1],c=n[o+1];return t=d?s-(s-d[0])/2:s,l=c?s-t+(c[0]-s)/2:r-t,{id:"slice:"+i+":"+s,x0:t,x:s,y0:0,y:0,width:l,height:a,points:u.reverse()}}))}if("y"===n){var o=new Map;return t.forEach((function(e){null!==e.data.x&&null!==e.data.y&&(o.has(e.y)?o.get(e.y).push(e):o.set(e.y,[e]))})),Array.from(o.entries()).sort((function(e,o){return e[0]-o[0]})).map((function(e,o,i){var n,t,l=e[0],s=e[1],u=i[o-1],d=i[o+1];return n=u?l-(l-u[0])/2:l,t=d?l-n+(d[0]-l)/2:a-n,{id:l,x0:0,x:0,y0:n,y:l,width:r,height:t,points:s.reverse()}}))}return[]}),[i,n,a,t,r])},le="line",se=function(e){var t=e.data,r=e.xScale,a=void 0===r?oe.xScale:r,l=e.xFormat,s=e.yScale,u=void 0===s?oe.yScale:s,c=e.yFormat,h=e.width,f=e.height,p=e.colors,v=void 0===p?oe.colors:p,b=e.curve,g=void 0===b?oe.curve:b,m=e.areaBaselineValue,y=void 0===m?oe.areaBaselineValue:m,x=e.pointColor,M=void 0===x?oe.pointColor:x,C=e.pointBorderColor,S=void 0===C?oe.pointBorderColor:C,B=e.enableSlices,w=void 0===B?ie.enableSlices:B,T=e.initialHiddenIds,k=void 0===T?ie.initialHiddenIds:T,W=i(O(le))[0],L=d(l),D=d(c),I=A(v,"id"),F=z(),E=V(M,F),G=V(S,F),H=i(null!=k?k:[]),P=H[0],R=H[1],U=o((function(){return Y(t.filter((function(e){return-1===P.indexOf(e.id)})),a,u,h,f)}),[t,P,a,u,h,f]),X=U.xScale,j=U.yScale,q=U.series,J=o((function(){var e=t.map((function(e){return{id:e.id,label:""+e.id,color:I(e)}})),o=e.map((function(e){return $({},q.find((function(o){return o.id===e.id})),{color:e.color})})).filter((function(e){return Boolean(e.id)}));return{legendData:e.map((function(e){return $({},e,{hidden:!o.find((function(o){return o.id===e.id}))})})).reverse(),series:o}}),[t,q,I]),K=J.legendData,N=J.series,Q=n((function(e){R((function(o){return o.indexOf(e)>-1?o.filter((function(o){return o!==e})):[].concat(o,[e])}))}),[]),Z=function(e){var i=e.series,n=e.getPointColor,t=e.getPointBorderColor,r=e.formatX,a=e.formatY;return o((function(){return i.reduce((function(e,o,i){return[].concat(e,o.data.filter((function(e){return null!==e.position.x&&null!==e.position.y})).map((function(l,s){var u={id:o.id+"."+s,indexInSeries:s,absIndex:e.length+s,seriesIndex:i,seriesId:o.id,seriesColor:o.color,x:l.position.x,y:l.position.y,data:$({},l.data,{xFormatted:r(l.data.x),yFormatted:a(l.data.y)})};return u.color=n({series:o,point:u}),u.borderColor=t(u),u})))}),[])}),[i,n,t,r,a])}({series:N,getPointColor:E,getPointBorderColor:G,formatX:L,formatY:D}),_=ae({componentId:W,enableSlices:w,points:Z,width:h,height:f});return{legendData:K,toggleSeries:Q,lineGenerator:te(g),areaGenerator:re({curve:g,yScale:j,areaBaselineValue:y}),getColor:I,series:N,xScale:X,yScale:j,slices:_,points:Z}},ue=function(e){var o=e.areaBlendMode,i=e.areaOpacity,n=e.color,t=e.fill,r=e.path,a=c(),l=a.animate,s=a.config,u=h(r),d=q({color:n,config:s,immediate:!l});return U(J.path,{d:u,fill:t||d.color,fillOpacity:i,strokeWidth:0,style:{mixBlendMode:o}})},de=e((function(e){var o=e.areaGenerator,i=e.areaOpacity,n=e.areaBlendMode,t=e.series.slice(0).reverse();return U("g",{children:t.map((function(e){return U(ue,$({path:o(e.data.map((function(e){return e.position})))},$({areaOpacity:i,areaBlendMode:n},e)),""+e.id)}))})})),ce=e((function(e){var i=e.lineGenerator,n=e.points,t=e.color,r=e.thickness,a=o((function(){return i(n)}),[i,n]),l=h(a);return U(J.path,{d:l,fill:"none",strokeWidth:r,stroke:t})})),he=e((function(e){var o=e.series,i=e.lineGenerator,n=e.lineWidth;return U(j,{children:o.slice(0).reverse().map((function(e){var o=e.id,t=e.data,r=e.color;return U(ce,{points:t.map((function(e){return e.position})),lineGenerator:i,color:r,thickness:n},o)}))})})),fe=e((function(e){var o=e.slice,i=e.slices,r=e.axis,a=e.debug,l=e.tooltip,s=e.isCurrent,u=e.setCurrent,d=e.onMouseEnter,c=e.onMouseMove,h=e.onMouseLeave,f=e.onMouseDown,p=e.onMouseUp,v=e.onClick,b=e.onDoubleClick,g=e.onTouchStart,m=e.onTouchMove,y=e.onTouchEnd,x=G(),M=x.showTooltipFromEvent,C=x.hideTooltip,S=n((function(e){M(t(l,{slice:o,axis:r}),e,"right"),u(o),null==d||d(o,e)}),[M,l,o,r,u,d]),B=n((function(e){M(t(l,{slice:o,axis:r}),e,"right"),null==c||c(o,e)}),[M,l,o,r,c]),w=n((function(e){C(),u(null),null==h||h(o,e)}),[C,u,h,o]),T=n((function(e){null==f||f(o,e)}),[o,f]),k=n((function(e){null==p||p(o,e)}),[o,p]),W=n((function(e){null==v||v(o,e)}),[o,v]),L=n((function(e){null==b||b(o,e)}),[o,b]),D=n((function(e){M(t(l,{slice:o,axis:r}),e,"right"),u(o),null==g||g(o,e)}),[r,g,u,M,o,l]),I=n((function(e){var n=e.touches[0],a=document.elementFromPoint(n.clientX,n.clientY),s=null==a?void 0:a.getAttribute("data-ref");if(s){var d=i.find((function(e){return e.id===s}));d&&(M(t(l,{slice:d,axis:r}),e,"right"),u(d))}null==m||m(o,e)}),[r,m,u,M,o,i,l]),F=n((function(e){C(),u(null),null==y||y(o,e)}),[C,u,y,o]);return U("rect",{x:o.x0,y:o.y0,width:o.width,height:o.height,stroke:"red",strokeWidth:a?1:0,strokeOpacity:.75,fill:"red",fillOpacity:s&&a?.35:0,onMouseEnter:S,onMouseMove:B,onMouseLeave:w,onMouseDown:T,onMouseUp:k,onClick:W,onDoubleClick:L,onTouchStart:D,onTouchMove:I,onTouchEnd:F,"data-ref":o.id})})),pe=e((function(e){var o=e.slices,i=e.axis,n=e.debug,t=e.tooltip,r=e.current,a=e.setCurrent,l=e.onMouseEnter,s=e.onMouseMove,u=e.onMouseLeave,d=e.onMouseDown,c=e.onMouseUp,h=e.onClick,f=e.onDoubleClick,p=e.onTouchStart,v=e.onTouchMove,b=e.onTouchEnd;return U(j,{children:o.map((function(e){return U(fe,{slice:e,slices:o,axis:i,debug:n,tooltip:t,setCurrent:a,isCurrent:null!==r&&r.id===e.id,onMouseEnter:l,onMouseMove:s,onMouseLeave:u,onMouseDown:d,onMouseUp:c,onClick:h,onDoubleClick:f,onTouchStart:p,onTouchMove:v,onTouchEnd:b},e.id)}))})})),ve=e((function(e){var o=e.points,i=e.symbol,n=e.size,r=e.borderWidth,a=e.enableLabel,l=e.label,s=e.labelYOffset,u=e.isFocusable,d=e.setCurrentPoint,c=e.tooltip,h=e.margin,v=e.ariaLabel,b=e.ariaLabelledBy,g=e.ariaDescribedBy,m=e.ariaHidden,y=e.ariaDisabled,x=f(l),M=G(),C=M.showTooltipAt,S=M.hideTooltip,B=o.slice(0).sort((function(e,o){return e.indexInSeries-o.indexInSeries})).sort((function(e,o){return o.seriesIndex-e.seriesIndex})).map((function(e){return{id:e.id,x:e.x,y:e.y,datum:e.data,fill:e.color,stroke:e.borderColor,label:a?x(e):null,ariaLabel:v?v(e):void 0,ariaLabelledBy:b?b(e):void 0,ariaDescribedBy:g?g(e):void 0,ariaHidden:m?m(e):void 0,ariaDisabled:y?y(e):void 0,onFocus:u?function(){d(e),C(t(c,{point:e}),[h.left+e.x,h.top+e.y],"top")}:void 0,onBlur:u?function(){d(null),S()}:void 0}}));return U("g",{children:B.map((function(e){return U(p,{x:e.x,y:e.y,datum:e.datum,symbol:i,size:n,color:e.fill,borderWidth:r,borderColor:e.stroke,label:e.label,labelYOffset:s,ariaLabel:e.ariaLabel,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,ariaHidden:e.ariaHidden,ariaDisabled:e.ariaDisabled,isFocusable:u,onFocus:e.onFocus,onBlur:e.onBlur,testId:"line.point."+e.id},e.id)}))})})),be=e((function(e){var o=e.points,i=e.width,r=e.height,a=e.margin,l=e.setCurrent,s=e.onMouseEnter,u=e.onMouseMove,d=e.onMouseLeave,c=e.onMouseDown,h=e.onMouseUp,f=e.onClick,p=e.onDoubleClick,v=e.onTouchStart,b=e.onTouchMove,g=e.onTouchEnd,m=e.tooltip,y=e.debug,x=e.enableTouchCrosshair,M=G(),C=M.showTooltipAt,S=M.hideTooltip,B=n((function(e,o){C(t(m,{point:e}),[e.x+a.left,e.y+a.top],"top"),null==s||s(e,o)}),[C,m,s,a]),w=n((function(e,o){C(t(m,{point:e}),[e.x+a.left,e.y+a.top],"top"),null==u||u(e,o)}),[C,m,a.left,a.top,u]),T=n((function(e,o){S(),null==d||d(e,o)}),[S,d]),k=n((function(e,o){null==c||c(e,o)}),[c]),W=n((function(e,o){null==h||h(e,o)}),[h]),L=n((function(e,o){null==f||f(e,o)}),[f]),D=n((function(e,o){null==p||p(e,o)}),[p]),I=n((function(e,o){C(t(m,{point:e}),[e.x+a.left,e.y+a.top],"top"),null==v||v(e,o)}),[a.left,a.top,v,C,m]),F=n((function(e,o){C(t(m,{point:e}),[e.x+a.left,e.y+a.top],"top"),null==b||b(e,o)}),[a.left,a.top,b,C,m]),E=n((function(e,o){S(),null==g||g(e,o)}),[g,S]);return U(K,{nodes:o,width:i,height:r,setCurrent:l,onMouseEnter:B,onMouseMove:w,onMouseLeave:T,onMouseDown:k,onMouseUp:W,onClick:L,onDoubleClick:D,onTouchStart:I,onTouchMove:F,onTouchEnd:E,enableTouchCrosshair:x,debug:y})})),ge=["isInteractive","animate","motionConfig","theme","renderWrapper"];function me(e){var o=e.data,n=e.xScale,t=void 0===n?ie.xScale:n,r=e.xFormat,l=e.yScale,s=void 0===l?ie.yScale:l,u=e.yFormat,d=e.curve,c=void 0===d?ie.curve:d,h=e.margin,f=e.width,p=e.height,v=e.colors,x=void 0===v?ie.colors:v,M=e.lineWidth,C=void 0===M?ie.lineWidth:M,S=e.layers,B=void 0===S?ie.layers:S,k=e.enableArea,W=void 0===k?ie.enableArea:k,D=e.areaBaselineValue,I=void 0===D?ie.areaBaselineValue:D,F=e.areaOpacity,E=void 0===F?ie.areaOpacity:F,G=e.areaBlendMode,P=void 0===G?ie.areaBlendMode:G,R=e.enablePoints,O=void 0===R?ie.enablePoints:R,z=e.pointSymbol,A=e.pointSize,V=void 0===A?ie.pointSize:A,Y=e.pointColor,X=void 0===Y?ie.pointColor:Y,j=e.pointBorderWidth,q=void 0===j?ie.pointBorderWidth:j,J=e.pointBorderColor,K=void 0===J?ie.pointBorderColor:J,N=e.enablePointLabel,Q=void 0===N?ie.enablePointLabel:N,Z=e.pointLabel,_=void 0===Z?ie.pointLabel:Z,ee=e.pointLabelYOffset,oe=e.enableGridX,ne=void 0===oe?ie.enableGridX:oe,te=e.gridXValues,re=e.enableGridY,ae=void 0===re?ie.enableGridY:re,le=e.gridYValues,ue=e.axisTop,ce=e.axisRight,fe=e.axisBottom,ge=void 0===fe?ie.axisBottom:fe,me=e.axisLeft,ye=void 0===me?ie.axisLeft:me,xe=e.defs,Me=void 0===xe?ie.defs:xe,Ce=e.fill,Se=void 0===Ce?ie.fill:Ce,Be=e.markers,we=e.legends,Te=void 0===we?ie.legends:we,ke=e.isInteractive,We=void 0===ke?ie.isInteractive:ke,Le=e.useMesh,De=void 0===Le?ie.useMesh:Le,Ie=e.debugMesh,Fe=void 0===Ie?ie.debugMesh:Ie,Ee=e.onMouseEnter,Ge=e.onMouseMove,He=e.onMouseLeave,Pe=e.onMouseDown,Re=e.onMouseUp,Oe=e.onClick,ze=e.onDoubleClick,Ae=e.onTouchStart,Ve=e.onTouchMove,Ye=e.onTouchEnd,Ue=e.tooltip,Xe=void 0===Ue?ie.tooltip:Ue,je=e.enableSlices,qe=void 0===je?ie.enableSlices:je,Je=e.debugSlices,Ke=void 0===Je?ie.debugSlices:Je,Ne=e.sliceTooltip,Qe=void 0===Ne?ie.sliceTooltip:Ne,Ze=e.enableCrosshair,$e=void 0===Ze?ie.enableCrosshair:Ze,_e=e.crosshairType,eo=void 0===_e?ie.crosshairType:_e,oo=e.enableTouchCrosshair,io=void 0===oo?ie.enableTouchCrosshair:oo,no=e.role,to=void 0===no?ie.role:no,ro=e.ariaLabel,ao=e.ariaLabelledBy,lo=e.ariaDescribedBy,so=e.isFocusable,uo=void 0===so?ie.isFocusable:so,co=e.pointAriaLabel,ho=e.pointAriaLabelledBy,fo=e.pointAriaDescribedBy,po=e.pointAriaHidden,vo=e.pointAriaDisabled,bo=e.initialHiddenIds,go=void 0===bo?ie.initialHiddenIds:bo,mo=e.forwardedRef,yo=b(f,p,h),xo=yo.margin,Mo=yo.innerWidth,Co=yo.innerHeight,So=yo.outerWidth,Bo=yo.outerHeight,wo=se({data:o,xScale:t,xFormat:r,yScale:s,yFormat:u,width:Mo,height:Co,colors:x,curve:c,areaBaselineValue:I,pointColor:X,pointBorderColor:K,enableSlices:qe,initialHiddenIds:go}),To=wo.legendData,ko=wo.toggleSeries,Wo=wo.lineGenerator,Lo=wo.areaGenerator,Do=wo.series,Io=wo.xScale,Fo=wo.yScale,Eo=wo.slices,Go=wo.points,Ho=i(null),Po=Ho[0],Ro=Ho[1],Oo=i(null),zo=Oo[0],Ao=Oo[1],Vo={grid:null,markers:null,axes:null,areas:null,crosshair:null,lines:null,points:null,slices:null,mesh:null,legends:null};B.includes("grid")&&(ne||ae)&&(Vo.grid=U(w,{width:Mo,height:Co,xScale:ne?Io:null,yScale:ae?Fo:null,xValues:te,yValues:le},"grid")),B.includes("markers")&&Array.isArray(Be)&&Be.length>0&&(Vo.markers=U(g,{markers:Be,width:Mo,height:Co,xScale:Io,yScale:Fo},"markers")),B.includes("axes")&&(Vo.axes=U(T,{xScale:Io,yScale:Fo,width:Mo,height:Co,top:ue,right:ce,bottom:ge,left:ye},"axes")),B.includes("lines")&&(Vo.lines=U(he,{series:Do,lineGenerator:Wo,lineWidth:C},"lines")),B.includes("legends")&&Te.length>0&&(Vo.legends=U(a,{children:Te.map((function(e,o){return U(L,$({},e,{containerWidth:Mo,containerHeight:Co,data:e.data||To,toggleSerie:e.toggleSerie?ko:void 0}),o)}))},"legends"));var Yo=m(Me,Do,Se);W&&(Vo.areas=U(de,{areaGenerator:Lo,areaOpacity:E,areaBlendMode:P,series:Do},"areas")),We&&!1!==qe&&(Vo.slices=U(pe,{slices:Eo,axis:qe,debug:Ke,tooltip:Qe,current:zo,setCurrent:Ao,onMouseEnter:Ee,onMouseMove:Ge,onMouseLeave:He,onMouseDown:Pe,onMouseUp:Re,onClick:Oe,onDoubleClick:ze,onTouchStart:Ae,onTouchMove:Ve,onTouchEnd:Ye},"slices")),O&&(Vo.points=U(ve,{points:Go,symbol:z,size:V,borderWidth:q,enableLabel:Q,label:_,labelYOffset:ee,isFocusable:uo,setCurrentPoint:Ro,tooltip:Xe,margin:xo,ariaLabel:co,ariaLabelledBy:ho,ariaDescribedBy:fo,ariaHidden:po,ariaDisabled:vo},"points")),We&&$e&&(null!==Po&&(Vo.crosshair=U(H,{width:Mo,height:Co,x:Po.x,y:Po.y,type:eo},"crosshair")),null!==zo&&qe&&(Vo.crosshair=U(H,{width:Mo,height:Co,x:zo.x,y:zo.y,type:qe},"crosshair"))),We&&De&&!1===qe&&(Vo.mesh=U(be,{points:Go,width:Mo,height:Co,margin:xo,setCurrent:Ro,onMouseEnter:Ee,onMouseMove:Ge,onMouseLeave:He,onMouseDown:Pe,onMouseUp:Re,onClick:Oe,onDoubleClick:ze,onTouchStart:Ae,onTouchMove:Ve,onTouchEnd:Ye,tooltip:Xe,enableTouchCrosshair:io,debug:Fe},"mesh"));var Uo=$({},e,{innerWidth:Mo,innerHeight:Co,series:Do,slices:Eo,points:Go,xScale:Io,yScale:Fo,lineGenerator:Wo,areaGenerator:Lo,currentPoint:Po,setCurrentPoint:Ro,currentSlice:zo,setCurrentSlice:Ao});return U(y,{defs:Yo,width:So,height:Bo,margin:xo,role:to,ariaLabel:ro,ariaLabelledBy:ao,ariaDescribedBy:lo,isFocusable:uo,ref:mo,children:B.map((function(e,o){return"function"==typeof e?U(a,{children:e(Uo)},o):Vo[e]}))})}var ye=r((function(e,o){var i=e.isInteractive,n=void 0===i?ie.isInteractive:i,t=e.animate,r=void 0===t?ie.animate:t,a=e.motionConfig,l=void 0===a?ie.motionConfig:a,s=e.theme,u=e.renderWrapper,d=_(e,ge);return U(v,{animate:r,isInteractive:n,motionConfig:l,renderWrapper:u,theme:s,children:U(me,$({isInteractive:n},d,{forwardedRef:o}))})})),xe=["defaultWidth","defaultHeight","onResize","debounceResize"],Me=r((function(e,o){var i=e.defaultWidth,n=e.defaultHeight,t=e.onResize,r=e.debounceResize,a=_(e,xe);return U(x,{defaultWidth:i,defaultHeight:n,onResize:t,debounceResize:r,children:function(e){var i=e.width,n=e.height;return U(ye,$({width:i,height:n},a,{ref:o}))}})})),Ce=["isInteractive","renderWrapper","theme"],Se=function(e){var r=e.width,a=e.height,u=e.margin,d=e.pixelRatio,c=void 0===d?ne.pixelRatio:d,h=e.data,f=e.xScale,p=void 0===f?ne.xScale:f,v=e.xFormat,g=e.yScale,m=void 0===g?ne.yScale:g,y=e.yFormat,x=e.curve,B=void 0===x?ne.curve:x,w=e.layers,T=void 0===w?ne.layers:w,L=e.colors,I=void 0===L?ne.colors:L,F=e.lineWidth,E=void 0===F?ne.lineWidth:F,H=e.enableArea,P=void 0===H?ne.enableArea:H,R=e.areaBaselineValue,O=void 0===R?ne.areaBaselineValue:R,A=e.areaOpacity,V=void 0===A?ne.areaOpacity:A,Y=e.enablePoints,X=void 0===Y?ne.enablePoints:Y,j=e.pointSize,q=void 0===j?ne.pointSize:j,J=e.pointColor,K=void 0===J?ne.pointColor:J,_=e.pointBorderWidth,ee=void 0===_?ne.pointBorderWidth:_,oe=e.pointBorderColor,ie=void 0===oe?ne.pointBorderColor:oe,te=e.enableGridX,re=void 0===te?ne.enableGridX:te,ae=e.gridXValues,le=e.enableGridY,ue=void 0===le?ne.enableGridY:le,de=e.gridYValues,ce=e.axisTop,he=e.axisRight,fe=e.axisBottom,pe=void 0===fe?ne.axisBottom:fe,ve=e.axisLeft,be=void 0===ve?ne.axisLeft:ve,ge=e.legends,me=void 0===ge?ne.legends:ge,ye=e.isInteractive,xe=void 0===ye?ne.isInteractive:ye,Me=e.debugMesh,Ce=void 0===Me?ne.debugMesh:Me,Se=e.onMouseLeave,Be=e.onMouseDown,we=e.onMouseUp,Te=e.onClick,ke=e.onDoubleClick,We=e.tooltip,Le=void 0===We?ne.tooltip:We,De=e.role,Ie=e.forwardedRef,Fe=l(null),Ee=b(r,a,u),Ge=Ee.margin,He=Ee.innerWidth,Pe=Ee.innerHeight,Re=Ee.outerWidth,Oe=Ee.outerHeight,ze=z(),Ae=i(null),Ve=Ae[0],Ye=Ae[1],Ue=se({data:h,xScale:p,xFormat:v,yScale:m,yFormat:y,width:He,height:Pe,colors:I,curve:B,areaBaselineValue:O,pointColor:K,pointBorderColor:ie}),Xe=Ue.lineGenerator,je=Ue.areaGenerator,qe=Ue.series,Je=Ue.xScale,Ke=Ue.yScale,Ne=Ue.points,Qe=o((function(){return{innerWidth:He,innerHeight:Pe,series:qe,points:Ne,xScale:Je,yScale:Ke,lineWidth:E,lineGenerator:Xe,areaGenerator:je,currentPoint:Ve,setCurrentPoint:Ye}}),[He,Pe,qe,Ne,Je,Ke,E,Xe,je,Ve,Ye]),Ze=N({points:Ne,width:He,height:Pe,debug:Ce}),$e=Ze.delaunay,_e=Ze.voronoi;s((function(){if(null!==Fe.current){Fe.current.width=Re*c,Fe.current.height=Oe*c;var e=Fe.current.getContext("2d");e.scale(c,c),e.fillStyle=ze.background,e.fillRect(0,0,Re,Oe),e.translate(Ge.left,Ge.top),T.forEach((function(o){var i;"function"==typeof o&&o(e,Qe);var n=null!=(i=ze.grid.line.strokeWidth)?i:0;if("grid"===o&&"string"!=typeof n&&n>0&&(e.lineWidth=n,e.strokeStyle=ze.grid.line.stroke,re&&k(e,{width:He,height:Pe,scale:Je,axis:"x",values:ae}),ue&&k(e,{width:He,height:Pe,scale:Ke,axis:"y",values:de})),"axes"===o&&W(e,{xScale:Je,yScale:Ke,width:He,height:Pe,top:ce,right:he,bottom:pe,left:be,theme:ze}),"areas"===o&&!0===P){e.save(),e.globalAlpha=V,je.context(e);for(var t=qe.length-1;t>=0;t--)e.fillStyle=qe[t].color,e.beginPath(),je(qe[t].data.map((function(e){return e.position}))),e.fill();e.restore()}if("lines"===o&&(Xe.context(e),qe.forEach((function(o){e.strokeStyle=o.color,e.lineWidth=E,e.beginPath(),Xe(o.data.map((function(e){return e.position}))),e.stroke()}))),"points"===o&&!0===X&&q>0&&Ne.forEach((function(o){e.fillStyle=o.color,e.beginPath(),e.arc(o.x,o.y,q/2,0,2*Math.PI),e.fill(),ee>0&&(e.strokeStyle=o.borderColor,e.lineWidth=ee,e.stroke())})),"mesh"===o&&!0===Ce&&void 0!==_e&&(Q(e,_e),Ve&&Z(e,_e,Ve.absIndex)),"legends"===o){var r=qe.map((function(e){return{id:e.id,label:e.id,color:e.color}})).reverse();me.forEach((function(o){D(e,$({},o,{data:o.data||r,containerWidth:He,containerHeight:Pe,theme:ze}))}))}}))}}),[Fe,He,Re,Pe,Oe,Ge.left,Ge.top,c,T,ze,Xe,qe,Je,Ke,re,ae,ue,de,ce,he,pe,be,me,Ne,X,q,ee,Ve,Qe,Ce,P,je,V,E,_e]);var eo=n((function(e){if(!Fe.current)return null;var o=M(Fe.current,e),i=o[0],n=o[1];if(!C(Ge.left,Ge.top,He,Pe,i,n))return null;var t=$e.find(i-Ge.left,n-Ge.top);return Ne[t]}),[Fe,Ge,He,Pe,$e,Ne]),oo=G(),io=oo.showTooltipFromEvent,no=oo.hideTooltip,to=n((function(e){var o=eo(e);Ye(o),o?io(t(Le,{point:o}),e):no()}),[eo,Ye,io,no,Le]),ro=n((function(e){no(),Ye(null),Ve&&(null==Se||Se(Ve,e))}),[no,Ye,Se,Ve]),ao=n((function(e){if(Be){var o=eo(e);o&&Be(o,e)}}),[eo,Be]),lo=n((function(e){if(we){var o=eo(e);o&&we(o,e)}}),[eo,we]),so=n((function(e){if(Te){var o=eo(e);o&&Te(o,e)}}),[eo,Te]),uo=n((function(e){if(ke){var o=eo(e);o&&ke(o,e)}}),[eo,ke]);return U("canvas",{ref:S(Fe,Ie),width:Re*c,height:Oe*c,style:{width:Re,height:Oe,cursor:xe?"auto":"normal"},onMouseEnter:xe?to:void 0,onMouseMove:xe?to:void 0,onMouseLeave:xe?ro:void 0,onMouseDown:xe?ao:void 0,onMouseUp:xe?lo:void 0,onClick:xe?so:void 0,onDoubleClick:xe?uo:void 0,role:De})},Be=r((function(e,o){var i=e.isInteractive,n=e.renderWrapper,t=e.theme,r=_(e,Ce);return U(v,{isInteractive:i,renderWrapper:n,theme:t,animate:!1,children:U(Se,$({},r,{forwardedRef:o}))})})),we=["defaultWidth","defaultHeight","onResize","debounceResize"],Te=r((function(e,o){var i=e.defaultWidth;e.defaultHeight;var n=e.onResize,t=e.debounceResize,r=_(e,we);return U(x,{defaultWidth:i,defaultHeight:i,onResize:n,debounceResize:t,children:function(e){var i=e.width,n=e.height;return U(Be,$({width:i,height:n},r,{ref:o}))}})}));function ke(e){return void 0!==e.seriesId}function We(e){return void 0!==e.points}export{le as LINE_UNIQUE_ID_PREFIX,ye as Line,Be as LineCanvas,Me as ResponsiveLine,Te as ResponsiveLineCanvas,ne as canvasDefaultProps,oe as commonDefaultProps,ke as isPoint,We as isSliceData,ie as svgDefaultProps,re as useAreaGenerator,se as useLine,te as useLineGenerator,ae as useSlices};
//# sourceMappingURL=nivo-line.mjs.map
