import{memo as t,useRef as i,useMemo as n,createContext as o,useState as r,useCallback as e,useContext as l}from"react";import{useSpring as a,animated as c}from"@react-spring/web";import{useMotionConfig as s,useMeasure as h,useValueFormatter as u}from"@nivo/core";import{useTheme as d}from"@nivo/theming";import{jsx as p,jsxs as y,Fragment as f}from"react/jsx-runtime";function v(){return v=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},v.apply(null,arguments)}var x=["basic","chip","container","table","tableCell","tableCellValue"],m={pointerEvents:"none",position:"absolute",zIndex:10,top:0,left:0},b=function(t,i){return"translate("+t+"px, "+i+"px)"},g=t((function(t){var n,o=t.position,r=t.anchor,e=t.children,l=d(),u=s(),y=u.animate,f=u.config,g=h(),w=g[0],T=g[1],C=i(!1),E=void 0,P=!1,V=T.width>0&&T.height>0,O=Math.round(o[0]),N=Math.round(o[1]);V&&("top"===r?(O-=T.width/2,N-=T.height+14):"right"===r?(O+=14,N-=T.height/2):"bottom"===r?(O-=T.width/2,N+=14):"left"===r?(O-=T.width+14,N-=T.height/2):"center"===r&&(O-=T.width/2,N-=T.height/2),E={transform:b(O,N)},C.current||(P=!0),C.current=[O,N]);var j=a({to:E,config:f,immediate:!y||P}),k=l.tooltip;k.basic,k.chip,k.container,k.table,k.tableCell,k.tableCellValue;var z=function(t,i){if(null==t)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(-1!==i.indexOf(o))continue;n[o]=t[o]}return n}(k,x),A=v({},m,z,{transform:null!=(n=j.transform)?n:b(O,N),opacity:j.transform?1:0});return p(c.div,{ref:w,style:A,children:e})}));g.displayName="TooltipWrapper";var w=t((function(t){var i=t.size,n=void 0===i?12:i,o=t.color,r=t.style;return p("span",{style:v({display:"block",width:n,height:n,background:o},void 0===r?{}:r)})})),T=t((function(t){var i,n=t.id,o=t.value,r=t.format,e=t.enableChip,l=void 0!==e&&e,a=t.color,c=t.renderContent,s=d(),h=u(r);if("function"==typeof c)i=c();else{var f=o;void 0!==h&&void 0!==f&&(f=h(f)),i=y("div",{style:s.tooltip.basic,children:[l&&p(w,{color:a,style:s.tooltip.chip}),void 0!==f?y("span",{children:[n,": ",p("strong",{children:""+f})]}):n]})}return p("div",{style:s.tooltip.container,role:"tooltip",children:i})})),C={width:"100%",borderCollapse:"collapse"},E=t((function(t){var i,n=t.title,o=t.rows,r=void 0===o?[]:o,e=t.renderContent,l=d();return r.length?(i="function"==typeof e?e():y("div",{children:[n&&n,p("table",{style:v({},C,l.tooltip.table),children:p("tbody",{children:r.map((function(t,i){return p("tr",{children:t.map((function(t,i){return p("td",{style:l.tooltip.tableCell,children:t},i)}))},i)}))})})]}),p("div",{style:l.tooltip.container,children:i})):null}));E.displayName="TableTooltip";var P=t((function(t){var i=t.x0,o=t.x1,r=t.y0,e=t.y1,l=d(),h=s(),u=h.animate,y=h.config,f=n((function(){return v({},l.crosshair.line,{pointerEvents:"none"})}),[l.crosshair.line]),x=a({x1:i,x2:o,y1:r,y2:e,config:y,immediate:!u});return p(c.line,v({},x,{fill:"none",style:f}))}));P.displayName="CrosshairLine";var V=t((function(t){var i,n,o=t.width,r=t.height,e=t.type,l=t.x,a=t.y;return"cross"===e?(i={x0:l,x1:l,y0:0,y1:r},n={x0:0,x1:o,y0:a,y1:a}):"top-left"===e?(i={x0:l,x1:l,y0:0,y1:a},n={x0:0,x1:l,y0:a,y1:a}):"top"===e?i={x0:l,x1:l,y0:0,y1:a}:"top-right"===e?(i={x0:l,x1:l,y0:0,y1:a},n={x0:l,x1:o,y0:a,y1:a}):"right"===e?n={x0:l,x1:o,y0:a,y1:a}:"bottom-right"===e?(i={x0:l,x1:l,y0:a,y1:r},n={x0:l,x1:o,y0:a,y1:a}):"bottom"===e?i={x0:l,x1:l,y0:a,y1:r}:"bottom-left"===e?(i={x0:l,x1:l,y0:a,y1:r},n={x0:0,x1:l,y0:a,y1:a}):"left"===e?n={x0:0,x1:l,y0:a,y1:a}:"x"===e?i={x0:l,x1:l,y0:0,y1:r}:"y"===e&&(n={x0:0,x1:o,y0:a,y1:a}),y(f,{children:[i&&p(P,{x0:i.x0,x1:i.x1,y0:i.y0,y1:i.y1}),n&&p(P,{x0:n.x0,x1:n.x1,y0:n.y0,y1:n.y1})]})}));V.displayName="Crosshair";var O=o({showTooltipAt:function(){},showTooltipFromEvent:function(){},hideTooltip:function(){}}),N={isVisible:!1,position:[null,null],content:null,anchor:null},j=o(N),k=function(t){var i=r(N),o=i[0],l=i[1],a=e((function(t,i,n){var o=i[0],r=i[1];void 0===n&&(n="top"),l({isVisible:!0,position:[o,r],anchor:n,content:t})}),[l]),c=e((function(i,n,o){void 0===o&&(o="top");var r=t.current.getBoundingClientRect(),e=t.current.offsetWidth,a=e===r.width?1:e/r.width,c="touches"in n?n.touches[0]:n,s=c.clientX,h=c.clientY,u=(s-r.left)*a,d=(h-r.top)*a;"left"!==o&&"right"!==o||(o=u<r.width/2?"right":"left"),l({isVisible:!0,position:[u,d],anchor:o,content:i})}),[t,l]),s=e((function(){l(N)}),[l]);return{actions:n((function(){return{showTooltipAt:a,showTooltipFromEvent:c,hideTooltip:s}}),[a,c,s]),state:o}},z=function(){var t=l(O);if(void 0===t)throw new Error("useTooltip must be used within a TooltipProvider");return t},A=function(){var t=l(j);if(void 0===t)throw new Error("useTooltipState must be used within a TooltipProvider");return t},F=function(t){return t.isVisible},M=function(){var t=A();return F(t)?p(g,{position:t.position,anchor:t.anchor,children:t.content}):null},W=function(t){var i=t.container,n=t.children,o=k(i),r=o.actions,e=o.state;return p(O.Provider,{value:r,children:p(j.Provider,{value:e,children:n})})};export{T as BasicTooltip,w as Chip,V as Crosshair,E as TableTooltip,M as Tooltip,O as TooltipActionsContext,W as TooltipProvider,j as TooltipStateContext,g as TooltipWrapper,N as hiddenTooltipState,F as isVisibleTooltipState,z as useTooltip,k as useTooltipHandlers,A as useTooltipState};
//# sourceMappingURL=nivo-tooltip.mjs.map
