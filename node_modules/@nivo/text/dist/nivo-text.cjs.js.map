{"version":3,"file":"nivo-text.cjs.js","sources":["../src/boxAnchor.ts","../src/Text.tsx","../src/canvas.ts"],"sourcesContent":["import { BoxAnchor } from '@nivo/core'\nimport { TextAlign, TextBaseline } from '@nivo/theming'\n\nconst textAlignByBoxAnchor: Record<BoxAnchor, TextAlign> = {\n    center: 'center',\n    'top-left': 'start',\n    top: 'center',\n    'top-right': 'end',\n    right: 'end',\n    'bottom-right': 'end',\n    bottom: 'center',\n    'bottom-left': 'start',\n    left: 'start',\n}\n\nconst textAlignOppositeMap: Record<TextAlign, TextAlign> = {\n    start: 'end',\n    center: 'center',\n    end: 'start',\n}\n\nconst textBaselineByBoxAnchor: Record<BoxAnchor, TextBaseline> = {\n    center: 'center',\n    'top-left': 'top',\n    top: 'top',\n    'top-right': 'top',\n    right: 'center',\n    'bottom-right': 'bottom',\n    bottom: 'bottom',\n    'bottom-left': 'bottom',\n    left: 'center',\n}\n\nconst textBaselineOppositeMap: Record<TextBaseline, TextBaseline> = {\n    top: 'bottom',\n    center: 'center',\n    bottom: 'top',\n}\n\nexport const getTextAlignFromBoxAnchor = (anchor: BoxAnchor, isOutside = false) => {\n    const align = textAlignByBoxAnchor[anchor]\n    if (!isOutside) return align\n    return textAlignOppositeMap[align]\n}\n\nexport const getTextBaselineFromBoxAnchor = (anchor: BoxAnchor, isOutside = false) => {\n    const baseline = textBaselineByBoxAnchor[anchor]\n    if (!isOutside) return baseline\n    return textBaselineOppositeMap[baseline]\n}\n","import { PropsWithChildren, ComponentProps } from 'react'\nimport { animated } from '@react-spring/web'\nimport { TextStyle } from '@nivo/theming'\n\ntype AnimatedComponentProps = ComponentProps<(typeof animated)['text']>\n\nexport type TextProps = PropsWithChildren<\n    Omit<AnimatedComponentProps, 'style'> & {\n        style: AnimatedComponentProps['style'] &\n            Pick<TextStyle, 'outlineWidth' | 'outlineColor' | 'outlineOpacity'>\n    }\n>\n\nexport const Text = ({ style: fullStyle, children, ...attributes }: TextProps) => {\n    const { outlineWidth, outlineColor, outlineOpacity, ...style } = fullStyle\n\n    return (\n        <>\n            {outlineWidth > 0 && (\n                <animated.text\n                    {...attributes}\n                    style={{\n                        ...style,\n                        strokeWidth: outlineWidth * 2,\n                        stroke: outlineColor,\n                        strokeOpacity: outlineOpacity,\n                        strokeLinejoin: 'round',\n                    }}\n                >\n                    {children}\n                </animated.text>\n            )}\n            <animated.text {...attributes} style={style}>\n                {children}\n            </animated.text>\n        </>\n    )\n}\n","import { TextStyle } from '@nivo/theming'\n\nexport const setCanvasFont = (ctx: CanvasRenderingContext2D, style: TextStyle) => {\n    ctx.font = `${style.fontWeight ? `${style.fontWeight} ` : ''}${style.fontSize}px ${\n        style.fontFamily\n    }`\n}\n\nexport const drawCanvasText = (\n    ctx: CanvasRenderingContext2D,\n    style: TextStyle,\n    text: string,\n    x = 0,\n    y = 0\n) => {\n    if (style.outlineWidth > 0) {\n        ctx.strokeStyle = style.outlineColor\n        ctx.lineWidth = style.outlineWidth * 2\n        ctx.lineJoin = 'round'\n        ctx.strokeText(text, x, y)\n    }\n\n    ctx.fillStyle = style.fill\n    ctx.fillText(text, x, y)\n}\n"],"names":["textAlignByBoxAnchor","center","top","right","bottom","left","textAlignOppositeMap","start","end","textBaselineByBoxAnchor","textBaselineOppositeMap","_ref","fullStyle","style","children","attributes","_objectWithoutPropertiesLoose","_excluded","outlineWidth","outlineColor","outlineOpacity","_excluded2","_jsxs","_Fragment","_jsx","jsx","animated","text","_extends","strokeWidth","stroke","strokeOpacity","strokeLinejoin","ctx","x","y","strokeStyle","lineWidth","lineJoin","strokeText","fillStyle","fill","fillText","anchor","isOutside","align","baseline","font","fontWeight","fontSize","fontFamily"],"mappings":"+EAGMA,EAAqD,CACvDC,OAAQ,SACR,WAAY,QACZC,IAAK,SACL,YAAa,MACbC,MAAO,MACP,eAAgB,MAChBC,OAAQ,SACR,cAAe,QACfC,KAAM,SAGJC,EAAqD,CACvDC,MAAO,MACPN,OAAQ,SACRO,IAAK,SAGHC,EAA2D,CAC7DR,OAAQ,SACR,WAAY,MACZC,IAAK,MACL,YAAa,MACbC,MAAO,SACP,eAAgB,SAChBC,OAAQ,SACR,cAAe,SACfC,KAAM,UAGJK,EAA8D,CAChER,IAAK,SACLD,OAAQ,SACRG,OAAQ,ucCvBQ,SAAHO,GAAiE,IAApDC,EAASD,EAAhBE,MAAkBC,EAAQH,EAARG,SAAaC,EAAUC,EAAAL,EAAAM,GACpDC,EAAyDN,EAAzDM,aAAcC,EAA2CP,EAA3CO,aAAcC,EAA6BR,EAA7BQ,eAAmBP,EAAKG,EAAKJ,EAASS,GAE1E,OACIC,EAAAA,KAAAC,EAAAA,SAAA,CAAAT,SACKI,CAAAA,EAAe,GACZM,EAAAC,IAACC,EAAQA,SAACC,KAAIC,KACNb,EAAU,CACdF,MAAKe,EAAA,CAAA,EACEf,EAAK,CACRgB,YAA4B,EAAfX,EACbY,OAAQX,EACRY,cAAeX,EACfY,eAAgB,UAClBlB,SAEDA,KAGTU,EAAAA,IAACE,EAAQA,SAACC,KAAIC,EAAA,CAAA,EAAKb,EAAU,CAAEF,MAAOA,EAAMC,SACvCA,OAIjB,yBC7B8B,SAC1BmB,EACApB,EACAc,EACAO,EACAC,QADC,IAADD,IAAAA,EAAI,QACH,IAADC,IAAAA,EAAI,GAEAtB,EAAMK,aAAe,IACrBe,EAAIG,YAAcvB,EAAMM,aACxBc,EAAII,UAAiC,EAArBxB,EAAMK,aACtBe,EAAIK,SAAW,QACfL,EAAIM,WAAWZ,EAAMO,EAAGC,IAG5BF,EAAIO,UAAY3B,EAAM4B,KACtBR,EAAIS,SAASf,EAAMO,EAAGC,EAC1B,oCFeyC,SAACQ,EAAmBC,QAAS,IAATA,IAAAA,GAAY,GACrE,IAAMC,EAAQ7C,EAAqB2C,GACnC,OAAKC,EACEtC,EAAqBuC,GADLA,CAE3B,uCAE4C,SAACF,EAAmBC,QAAS,IAATA,IAAAA,GAAY,GACxE,IAAME,EAAWrC,EAAwBkC,GACzC,OAAKC,EACElC,EAAwBoC,GADRA,CAE3B,wBE/C6B,SAACb,EAA+BpB,GACzDoB,EAAIc,MAAUlC,EAAMmC,WAAgBnC,EAAMmC,WAAgB,IAAA,IAAKnC,EAAMoC,SACjEpC,MAAAA,EAAMqC,UAEd"}